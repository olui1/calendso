version: 1
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - yarn run build
        - EMAIL_FROM=${EMAIL_FROM}
        - DATABASE_URL=${DATABASE_URL}
        - NEXT_PUBLIC_TELEMETRY_KEY=${NEXT_PUBLIC_TELEMETRY_KEY}
        - ZOOM_CLIENT_ID=${ZOOM_CLIENT_ID}
        - ZOOM_CLIENT_SECRET=${ZOOM_CLIENT_SECRET}
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
